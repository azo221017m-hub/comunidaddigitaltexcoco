<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Comunidad Digital Texcoco</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="css/style.css">
<script src="js/script.js" defer></script>

</head>
<body>

<div id="cursor" class="cursor-circle"></div>

<script>
  const cursor = document.getElementById('cursor');
  document.addEventListener('mousemove', e => {
    cursor.style.left = e.clientX + 'px';
    cursor.style.top = e.clientY + 'px';
  });
</script>


  <!-- Animated background layers -->
  <div class="bg-animated" aria-hidden="true">
    <div class="grad"></div>
    <div class="stripes"></div>
    <div class="orb o1"></div>
    <div class="orb o2"></div>
    <div class="orb o3"></div>
  </div>

  <!-- Header -->
  <header class="navbar" role="banner">
    <div class="logo" aria-label="logo">
      <!-- Cambia logocdt.png por tu imagen -->
      <img src=img/logocdt.png alt="Logo Proyecto">
      <div class="brand">Comunidad Digital Texcoco Ver 9.35</div>
    </div>

    <div class="center-section" aria-hidden="false">
      <div class="title">El pulso digital de Texcoco.</div>
      <div class="desc">Somos una soluci√≥n digital en Texcoco donde emprendedores, creativos y ciudadanos<BR>
conectan, comparten ideas y desarrollan oportunidades para crecer juntos...</div>
    </div>

<div style="display:flex;gap:14px;align-items:center;">
<div id="contador">Cargando visitas CDT...</div>

 <script>
    // Traer el contador desde la API
    fetch('/api/visitas')
      .then(response => response.json())
      .then(data => {
        document.getElementById('contador').textContent = `El sitio ha sido visitado ${data.visitas} veces.`;
      })
      .catch(err => {
        document.getElementById('contador').textContent = 'No se pudo cargar el contador.';
        console.error(err);
      });
  </script>
             
      </div>
     </header>


<main class="container">
  <!-- Fichas de negocio -->

<section class="business-grid">

<div class="carousel-row" id="bizCarousel">



    <div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="img/logocdt.png" alt=""></div>
        <div class="slide"><img src="img/logocdt2.png" alt=""></div>
        <div class="slide"><img src="img/logocdt3.png" alt=""></div>
      </div>
      <div class="card-info">
        <h3>COmunidad DIgital TExcoco</h3>
        <p>Conecta con m√°s clientes.</p>
        <div class="loc">‚úçÔ∏è Registr0 GRATIS </div>
      </div>
    </div>



    <div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="img/dulcesabor.png" alt=""></div>
        <div class="slide"><img src="img/dulcesabor2.png" alt=""></div>
        <div class="slide"><img src="img/dulcesabor3.png" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Dulce Sabor del Recuerdo</h3>
        <p> Pasteles, gelatinas, y recuerdos personalizados.</p>
        <div class="loc">üìû 5615720256</div>
      </div>
    </div>


     <div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="img/chuzamar.png" alt=""></div>
        <div class="slide"><img src="img/chuzamar2.png" alt=""></div>
        <div class="slide"><img src="img/chuzamar3.png" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Churrer√≠a ZAMAR</h3>
        <p> Elaboramos deliciosos y crujientes churros en Texcoco.</p>
        <div class="loc">üìû 5535569723</div>
      </div>
    </div>


        <div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="img/quirug.png" alt=""></div>
        <div class="slide"><img src="img/quirug2.png" alt=""></div>
        <div class="slide"><img src="img/quirug3.png" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Quir√∫rgicos Guillaume</h3>
        <p>Venta de Uniformes Quir√∫rgicos  -Desde $100 pesos. tallas y piezas √∫nicas 
(Cherokee, Grey Anatomy, Figs, Landui, etc.) 
 Filipinas, pantalones , conjuntos quir√∫rgicos gorros y mucho m√°s. 
 IG: QUIR√öRGICOS_GUILLAUME .</p>
        <div class="loc">üìû 5620270725</div>
      </div>
    </div>



     <div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="img/frannice.png" alt=""></div>
        <div class="slide"><img src="img/frannice2.png" alt=""></div>
        <div class="slide"><img src="img/frannice3.png" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Fran Nice</h3>
        <p>Joyer√≠a mexicana de 4 ba√±os de oro de 18 kilates, platino o cobalto. 
          Piedras de cristal y/o diamonice .  </p>
        <div class="loc">üìû 5518247015</div>
      </div>
    </div>


    <div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="img/logocdt.png" alt=""></div>
        <div class="slide"><img src="img/logocdt2.png" alt=""></div>
        <div class="slide"><img src="img/logocdt3.png" alt=""></div>
      </div>
      <div class="card-info">
        <h3>COmunidad DIgital TExcoco</h3>
        <p>Conecta con m√°s clientes.</p>
        <div class="loc">‚úçÔ∏è Registro GRATIS</div>
      </div>
    </div>



    <!-- Puedes clonar m√°s business-card seg√∫n sea necesario -->
  </div>
</section>

</main>

  <!-- Beneficios -->
  <section class="benefits" id="beneficios">
    <div class="benefit">
      <h3>üì¢ M√°s visibilidad</h3>
      <p>Muestra lo bonito de tu negocio en nuestra comunidad digital y llega a m√°s clientes.</p>
    </div>
    <div class="benefit">
      <h3>ü§ù Conexi√≥n local</h3>
      <p>Haz alianzas con otros emprendedores de Texcoco.<br>
         (Mantenimiento, Publicidad, Impresores, Transporte, etc.)</p>
    </div>
    <div class="benefit">
      <h3>üíª Digitalizaci√≥n F√°cil</h3>
      <p>Sin costo, sin complicaciones, con solo un registro.</p>
    </div>
    <div class="benefit">
      <h3>üöÄ Crecimiento real</h3>
      <p>M√°s clientes, m√°s oportunidades, m√°s futuro.</p>
    </div>
  </section>

<section class="registro-container">
    <h2>Registra tu Negocio en nuestra Comunidad Digital</h2>


<form id="regForm">
  <div class="form-group">
    <label for="contacto">Nombre de contacto</label>
    <input type="text" id="contacto" placeholder="Ej. Juan P√©rez" required>
  </div>

  <div class="form-group">
    <label for="nomnegocio">Nombre de negocio</label>
    <input type="text" id="nomnegocio" placeholder="Ej. Abarrotes Texcoco" required>
  </div>

  <div class="form-group">
    <label for="telefono">Tel√©fono</label>
    <input type="tel" id="telefono" placeholder="Ej. 595-123-4567" required>
  </div>

  <div class="form-group">
    <label for="descripcion">Descripci√≥n del negocio</label>
    <textarea id="descripcion" placeholder="Breve descripci√≥n..." required></textarea>
  </div>

<div class="form-group">
  
  <!-- Input real oculto -->
<input 
  type="file" 
  id="imagenes" 
  name="imagen" 
  accept="image/*"
  onchange="validarMaximoImagenes(this)">

</div>


  <button type="submit" class="btn-submit">Registrar mi negocio</button>

<div class="aviso-container">
  <span id="avisoToggle" class="aviso-link">AVISO DE PRIVACIDAD</span>
  <div id="avisoBubble" class="aviso-bubble">
    <h4>Aviso de Privacidad</h4>
    <p>
      Este sitio web respeta tu privacidad. Los datos recolectados ser√°n usados √∫nicamente
      para fines de registro y contacto de negocios, conforme a la Ley de Protecci√≥n de Datos.
      No compartimos informaci√≥n con terceros sin tu consentimiento.
    </p>
  </div>
</div>

</form>

<script>
const form = document.getElementById("regForm");

form.addEventListener("submit", async function(e) {
  e.preventDefault();

  const contacto = document.getElementById("contacto");
  const nomnegocio = document.getElementById("nomnegocio");
  const telefono = document.getElementById("telefono");
  const descripcion = document.getElementById("descripcion");
  const imagenes = document.getElementById("imagenes");

  try {
    // 1Ô∏è‚É£ Enviar datos al backend
    const formData = new FormData();
    formData.append('nombredenegocio', nomnegocio.value);
    formData.append('propietario', contacto.value);
    formData.append('telnegocio', telefono.value);
    formData.append('descripcionnegocio', descripcion.value);
    if(imagenes.files.length > 0){
      formData.append('imagen', imagenes.files[0]);
    }

    const res = await fetch('https://comunidaddigitaltexcoco.onrender.com/api/negocios', {
      method: 'POST',
      body: formData
    });

    const msg = await res.text();
    console.log(msg);
    alert(msg); // mostrar mensaje al usuario

  } catch(err) {
    console.error('Error al guardar en DB:', err);
    alert('‚ùå Error al guardar negocio');
  }

  form.reset();
});


</script>


  </section>

    <!-- Footer -->
    <footer class="site-footer">
      <div>¬© 2025 Comunidad Digital Texcoco</div>

    </footer>
  </main>



<script>
// Obtener contador del localStorage (persistencia local)

  let visitas = localStorage.getItem('contadorVisitas') || 0;
  visitas = parseInt(visitas) + 1;
  localStorage.setItem('contadorVisitas', visitas);

 
/* ---------- Card slides per card (auto-advance) ---------- */
document.querySelectorAll('.business-card').forEach(card=>{
  const slides = card.querySelectorAll('.slide');
  let idx = 0, t;
  function show(i){
    slides.forEach((s,si)=> s.classList.toggle('active', si===i));
  }
  function start(){
    t = setInterval(()=>{
      idx = (idx+1) % slides.length;
      show(idx);
    }, 3000 + Math.random()*1200);
  }
  function stop(){
    clearInterval(t);
  }
  // start auto-rotate
  start();

  // Stop rotating when hovering the card (so flip shows back)
  card.addEventListener('mouseenter', ()=> stop());
  card.addEventListener('mouseleave', ()=> start());
});

/* ---------- Mini slide in Comunidad (3 images) ---------- */
(function(){
  const container = document.getElementById('miniSlide');
  if(!container) return;
  const imgs = Array.from(container.querySelectorAll('img'));
  let i=0;
  function show(j){ imgs.forEach((img,idx)=> img.style.display = idx===j ? 'block' : 'none'); }
  show(0);
  setInterval(()=>{ i = (i+1) % imgs.length; show(i); }, 3500);
})();



/* ---------- Accessibility: reduce motion respect ---------- */
if(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
  document.querySelectorAll('.bg-animated .orb').forEach(o=> o.style.animation = 'none');
  document.querySelectorAll('.slides .slide').forEach(s=> s.style.transition = 'none');
}



// JavaScript
const avisoLink = document.getElementById('avisoToggle');
const avisoBubble = document.getElementById('avisoBubble');

avisoLink.addEventListener('click', () => {
  // Alterna la visibilidad de la burbuja
  avisoBubble.style.display = avisoBubble.style.display === 'block' ? 'none' : 'block';
});

// Opcional: cerrar la burbuja al hacer click fuera
document.addEventListener('click', (e) => {
  if (!avisoLink.contains(e.target) && !avisoBubble.contains(e.target)) {
    avisoBubble.style.display = 'none';
  }
});
</script>
</body>
</html>