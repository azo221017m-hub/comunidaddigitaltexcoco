<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Comunidad Digital Texcoco â€” Demo</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="css/style.css">
<script src="js/script.js" defer></script>

</head>
<body>

<div id="cursor" class="cursor-circle"></div>

<script>
  const cursor = document.getElementById('cursor');
  document.addEventListener('mousemove', e => {
    cursor.style.left = e.clientX + 'px';
    cursor.style.top = e.clientY + 'px';
  });
</script>


  <!-- Animated background layers -->
  <div class="bg-animated" aria-hidden="true">
    <div class="grad"></div>
    <div class="stripes"></div>
    <div class="orb o1"></div>
    <div class="orb o2"></div>
    <div class="orb o3"></div>
  </div>

  <!-- Header -->
  <header class="navbar" role="banner">
    <div class="logo" aria-label="logo">
      <!-- Cambia logocdt.png por tu imagen -->
      <img src=img/logocdt.png alt="Logo Proyecto">
      <div class="brand">Comunidad DT Ver 3.01</div>
    </div>

    <div class="center-section" aria-hidden="false">
      <div class="title">El pulso digital de Texcoco.</div>
      <div class="desc">Somos una soluciÃ³n digital en Texcoco donde emprendedores, creativos y ciudadanos<BR>
conectan, comparten ideas y desarrollan oportunidades para crecer juntos...</div>
    </div>


       <div style="display:flex;gap:14px;align-items:center;">
             <div id="contadorVisitas">Visitas: 0</div>
      </div>
     </header>




<main class="container">
  <!-- Fichas de negocio -->

<section class="business-grid">
  <div class="carousel-row" id="bizCarousel">
    <div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="https://picsum.photos/seed/biz1a/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz1b/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz1c/400/300" alt=""></div>
      </div>
      <div class="card-info">
        <h3>PanaderÃ­a La TradiciÃ³n</h3>
        <p>Deliciosos panes artesanales.</p>
        <div class="loc">ğŸ“ Av. Principal 123</div>
      </div>
    </div>

    <div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="https://picsum.photos/seed/biz2a/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz2b/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz2c/400/300" alt=""></div>
      </div>
      <div class="card-info">
        <h3>CafeterÃ­a Aroma</h3>
        <p>CafÃ© y pasteles gourmet.</p>
        <div class="loc">ğŸ“ Calle Secundaria 45</div>
      </div>
    </div>

    <div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="https://picsum.photos/seed/biz3a/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3b/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3c/400/300" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Tienda Verde</h3>
        <p>Productos ecolÃ³gicos y locales.</p>
        <div class="loc">ğŸ“ Plaza Central 78</div>
      </div>
    </div>

<div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="https://picsum.photos/seed/biz3a/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3b/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3c/400/300" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Tienda Verde</h3>
        <p>Productos ecolÃ³gicos y locales.</p>
        <div class="loc">ğŸ“ Plaza Central 78</div>
      </div>
    </div>

<div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="https://picsum.photos/seed/biz3a/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3b/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3c/400/300" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Tienda Verde</h3>
        <p>Productos ecolÃ³gicos y locales.</p>
        <div class="loc">ğŸ“ Plaza Central 78</div>
      </div>
    </div>

<div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="https://picsum.photos/seed/biz3a/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3b/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3c/400/300" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Tienda Verde</h3>
        <p>Productos ecolÃ³gicos y locales.</p>
        <div class="loc">ğŸ“ Plaza Central 78</div>
      </div>
    </div>

<div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="https://picsum.photos/seed/biz3a/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3b/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3c/400/300" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Tienda Verde</h3>
        <p>Productos ecolÃ³gicos y locales.</p>
        <div class="loc">ğŸ“ Plaza Central 78</div>
      </div>
    </div>

<div class="business-card">
      <div class="slides">
        <div class="slide active"><img src="https://picsum.photos/seed/biz3a/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3b/400/300" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/seed/biz3c/400/300" alt=""></div>
      </div>
      <div class="card-info">
        <h3>Tienda Verde</h3>
        <p>Productos ecolÃ³gicos y locales.</p>
        <div class="loc">ğŸ“ Plaza Central 78</div>
      </div>
    </div>

    <!-- Puedes clonar mÃ¡s business-card segÃºn sea necesario -->
  </div>
</section>

</main>

  <!-- Beneficios -->
  <section class="benefits" id="beneficios">
    <div class="benefit">
      <h3>ğŸ“¢ MÃ¡s visibilidad</h3>
      <p>Muestra lo bonito de tu negocio en nuestra comunidad digital y llega a mÃ¡s clientes.</p>
    </div>
    <div class="benefit">
      <h3>ğŸ¤ ConexiÃ³n local</h3>
      <p>Haz alianzas con otros emprendedores de Texcoco.<br>
         (Mantenimiento, Publicidad, Impresores, Transporte, etc.)</p>
    </div>
    <div class="benefit">
      <h3>ğŸ’» DigitalizaciÃ³n FÃ¡cil</h3>
      <p>Sin costo, sin complicaciones, con solo un registro.</p>
    </div>
    <div class="benefit">
      <h3>ğŸš€ Crecimiento real</h3>
      <p>MÃ¡s clientes, mÃ¡s oportunidades, mÃ¡s futuro.</p>
    </div>
  </section>

<section class="registro-container">
    <h2>Registra tu Negocio en nuestra Comunidad Digital</h2>
   

<form id="regForm">
  <div class="form-group">
    <label for="contacto">Nombre de contacto</label>
    <input type="text" id="contacto" placeholder="Ej. Juan PÃ©rez" required>
  </div>

  <div class="form-group">
    <label for="telefono">TelÃ©fono</label>
    <input type="tel" id="telefono" placeholder="Ej. 555-123-4567" required>
  </div>

  <div class="form-group">
    <label for="descripcion">DescripciÃ³n del negocio</label>
    <textarea id="descripcion" placeholder="Breve descripciÃ³n..." required></textarea>
  </div>

<div class="form-group">
  <label for="imagenes">Carga hasta 3 imÃ¡genes de tu negocio</label>
  
  <!-- BotÃ³n estilizado -->
  <label for="imagenes" class="btn-upload">ğŸ“¸ Seleccionar imÃ¡genes</label>
  
  <!-- Input real oculto -->
  <input 
    type="file" 
    id="imagenes" 
    name="imagenes[]" 
    accept="image/*" 
    multiple 
    onchange="validarMaximoImagenes(this)">
</div>


  <button type="submit" class="btn-submit">Registrar mi negocio</button>
</form>

<script>
const form = document.getElementById("regForm");

form.addEventListener("submit", async function(e) {
  e.preventDefault(); // Evitar envÃ­o por defecto

  const contacto = document.getElementById("contacto");
  const telefono = document.getElementById("telefono");
  const descripcion = document.getElementById("descripcion");
  const imagenes = document.getElementById("imagenes"); // input file

  let valido = true;
  [contacto, telefono, descripcion].forEach(campo => {
    if (!campo.value.trim()) {
      campo.classList.add("invalid");
      valido = false;
    } else {
      campo.classList.remove("invalid");
    }
  });
  if (!valido) return;

  // --- 1. Enviar a WhatsApp ---
  const mensaje = `Nuevo registro de negocio:%0A` +
                  `Nombre de contacto: ${contacto.value}%0A` +
                  `TelÃ©fono: ${telefono.value}%0A` +
                  `DescripciÃ³n: ${descripcion.value}`;

  const numeroWhats = "5215527618631"; 
  const url = `https://wa.me/${numeroWhats}?text=${mensaje}`;
  window.open(url, "_blank");

  // --- 2. Enviar al backend para guardar en DB ---
  try {
    const formData = new FormData();
    formData.append('nobredenegocio', contacto.value); // aquÃ­ puedes adaptar el nombre del negocio si lo tienes
    formData.append('propietario', contacto.value);
    formData.append('telnegocio', telefono.value);
    formData.append('descripcionnegocio', descripcion.value);

    // Adjuntar imagenes (solo 1 por simplicidad, o guardar la ruta)
    if(imagenes.files.length > 0){
      formData.append('imagen', imagenes.files[0]); 
      // para mÃºltiples imÃ¡genes habrÃ­a que guardarlas y enviar sus rutas
    }

    const res = await fetch('http://localhost:3000/api/negocios', {
      method: 'POST',
      body: formData
    });

    const msg = await res.text();
    console.log(msg);
  } catch(err) {
    console.error('Error al guardar en DB:', err);
  }

  // Limpiar formulario
  form.reset();
});



</script>





  </section>

    <!-- Footer -->
    <footer class="site-footer">
      <div>Â© 2025 Comunidad Digital Texcoco</div>
   
    </footer>
  </main>

<script>



// Obtener contador del localStorage (persistencia local)
  let visitas = localStorage.getItem('contadorVisitas') || 0;
  visitas = parseInt(visitas) + 1;
  localStorage.setItem('contadorVisitas', visitas);

  // Mostrar en el footer
  document.getElementById('contadorVisitas').innerText = `Visitas: ${visitas}`;


/* ---------- Card slides per card (auto-advance) ---------- */
document.querySelectorAll('.business-card').forEach(card=>{
  const slides = card.querySelectorAll('.slide');
  let idx = 0, t;
  function show(i){
    slides.forEach((s,si)=> s.classList.toggle('active', si===i));
  }
  function start(){
    t = setInterval(()=>{
      idx = (idx+1) % slides.length;
      show(idx);
    }, 3000 + Math.random()*1200);
  }
  function stop(){
    clearInterval(t);
  }
  // start auto-rotate
  start();

  // Stop rotating when hovering the card (so flip shows back)
  card.addEventListener('mouseenter', ()=> stop());
  card.addEventListener('mouseleave', ()=> start());
});

/* ---------- Mini slide in Comunidad (3 images) ---------- */
(function(){
  const container = document.getElementById('miniSlide');
  if(!container) return;
  const imgs = Array.from(container.querySelectorAll('img'));
  let i=0;
  function show(j){ imgs.forEach((img,idx)=> img.style.display = idx===j ? 'block' : 'none'); }
  show(0);
  setInterval(()=>{ i = (i+1) % imgs.length; show(i); }, 3500);
})();



/* ---------- Accessibility: reduce motion respect ---------- */
if(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
  document.querySelectorAll('.bg-animated .orb').forEach(o=> o.style.animation = 'none');
  document.querySelectorAll('.slides .slide').forEach(s=> s.style.transition = 'none');
}
</script>
</body>
</html>
